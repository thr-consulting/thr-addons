<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"user.js.html":{"id":"user.js.html","title":"Source: user.js","body":" Documentation Classes MomentSchemaMoneySchema Global addressemaillocalDateNumbermomentpasswordpasswordSecondphoneschemaValidate Source: user.js import {string, object} from 'yup'; import SIN from 'social-insurance-number'; import escapeRegExp from 'escape-string-regexp'; /** * Validates email addresses. */ export const email = () =&gt; string() .email('Invalid email address') .required('Email required') .trim() .lowercase(); /** * Validates a password. Required string, min length 6 chars. */ export const password = () =&gt; string() .min(6) .required('Password required'); /** * Validates a second password. * @param passwordField */ export const passwordSecond = passwordField =&gt; string().when(passwordField, v =&gt; { if (!v) return string().required('Please confirm your password'); return string().matches(new RegExp(`^${escapeRegExp(v)}$`), 'Passwords must match'); }); /** * Validates an address object. */ export const address = () =&gt; object({ description: string().required('Description required'), address1: string().required('Address 1 required'), address2: string(), city: string(), province: string(), postalCode: string().matches(/^[A-Z]\\d[A-Z] \\d[A-Z]\\d$|^\\d\\d\\d\\d\\d$|^\\d\\d\\d\\d\\d-\\d\\d\\d\\d$/, 'Invalid Postal Code'), }); /** * Validates a phone number. */ export const phone = () =&gt; object({ description: string().required('Description required'), number: string().required().matches(/^(\\d\\d\\d-\\d\\d\\d-\\d\\d\\d\\d|\\+\\d-\\d\\d\\d-\\d\\d\\d-\\d\\d\\d\\d)( x\\d+)?$/, 'Invalid Phone Number'), }); /** * Validates a Canadian SIN. */ export const sin = () =&gt; object({ sin: string().test('is-sin', '${path} is not a valid SIN', value =&gt; new SIN(value).isValid()), // eslint-disable-line }); × Search results Close Documentation generated by JSDoc 3.6.2 on 2019-08-28T09:32:26-05:00 using the DocStrap template. "},"date.js.html":{"id":"date.js.html","title":"Source: date.js","body":" Documentation Classes MomentSchemaMoneySchema Global addressemaillocalDateNumbermomentpasswordpasswordSecondphoneschemaValidate Source: date.js import {mixed, number} from 'yup'; import momentjs from 'moment'; import {LocalDate} from 'js-joda'; import isNull from 'lodash/isNull'; /** * Validates a Moment. */ class MomentSchema extends mixed { constructor() { super({type: 'momentschema'}); this.transforms.push(value =&gt; { if (this.isType(value)) return value; const val = momentjs(value); return val.isValid() ? val : momentjs.invalid(); }); } _typeCheck(v) { return momentjs.isMoment(v) &amp;&amp; v.isValid(); } } export const moment = () =&gt; new MomentSchema(); /** * Validates a LocalDateNumber */ export const localDateNumber = () =&gt; number(); /** * Validates a LocalDate */ class LocalDateSchema extends mixed { constructor() { super({type: 'localdateschema'}); this.transforms.push(value =&gt; { if (this.isType(value)) return value; if (isNull(value)) return null; if (value._year &amp;&amp; value._month &amp;&amp; value._day) { // eslint-disable-line no-underscore-dangle return LocalDate.of(value._year, value._month, value._day); // eslint-disable-line no-underscore-dangle } return null; }); } _typeCheck(v) { return v instanceof LocalDate; } } export const localDate = () =&gt; new LocalDateSchema(); × Search results Close Documentation generated by JSDoc 3.6.2 on 2019-08-28T09:32:26-05:00 using the DocStrap template. "},"money.js.html":{"id":"money.js.html","title":"Source: money.js","body":" Documentation Classes MomentSchemaMoneySchema Global addressemaillocalDateNumbermomentpasswordpasswordSecondphoneschemaValidate Source: money.js import {mixed} from 'yup'; import Money from 'js-money'; import isNull from 'lodash/isNull'; /** * Validates a Money (from js-money). */ class MoneySchema extends mixed { constructor() { super({type: 'moneyschema'}); this.transforms.push(value =&gt; { if (this.isType(value)) return value; if (isNull(value)) return null; if (value.amount &amp;&amp; value.currency) return new Money(value.amount, value.currency); return null; }); } _typeCheck(v) { return v instanceof Money; } } export const money = () =&gt; new MoneySchema(); × Search results Close Documentation generated by JSDoc 3.6.2 on 2019-08-28T09:32:26-05:00 using the DocStrap template. "},"schemaValidate.js.html":{"id":"schemaValidate.js.html","title":"Source: schemaValidate.js","body":" Documentation Classes MomentSchemaMoneySchema Global addressemaillocalDateNumbermomentpasswordpasswordSecondphoneschemaValidate Source: schemaValidate.js import omit from 'lodash/omit'; import debug from 'debug'; const d = debug('thx:tschemas:schemaValidate'); /** * Validates a schema on the server. This function is for use on the server only! * Returns null if validation passed. Returns a yup ValidationError if it fails. * Does not include the object as 'value'. * @function schemaValidate * @tag Server * @param {YupSchema} schema - The schema to validate against. * @param {object} obj - The object to validate. * @param validateOptions - Custom yup validate options. * @returns {object} */ export default async function schemaValidate(schema, obj, validateOptions) { try { await schema.validate(obj, validateOptions || {strict: true}); return null; } catch (err) { d('Validation error:', err); return omit(err, 'value'); } } × Search results Close Documentation generated by JSDoc 3.6.2 on 2019-08-28T09:32:26-05:00 using the DocStrap template. "},"index.js.html":{"id":"index.js.html","title":"Source: index.js","body":" Documentation Classes MomentSchemaMoneySchema Global addressemaillocalDateNumbermomentpasswordpasswordSecondphoneschemaValidate Source: index.js import {address, email, password, passwordSecond, phone, sin} from './user'; import {localDateNumber, localDate, moment} from './date'; import {money} from './money'; import schemaValidate from './schemaValidate'; export default { email, password, passwordSecond, address, phone, sin, moment, money, localDateNumber, localDate, schemaValidate, }; /** * Generic Yup Schema * @typedef {Object} YupSchema */ × Search results Close Documentation generated by JSDoc 3.6.2 on 2019-08-28T09:32:26-05:00 using the DocStrap template. "},"global.html":{"id":"global.html","title":"Global","body":" Documentation Classes MomentSchemaMoneySchema Global addressemaillocalDateNumbermomentpasswordpasswordSecondphoneschemaValidate Global Members address Validates a phone number. Source: user.js, line 42 email Validates a password. Required string, min length 6 chars. Source: user.js, line 14 localDateNumber Validates a LocalDate Source: date.js, line 32 moment Validates a LocalDateNumber Source: date.js, line 27 password Validates a second password. Source: user.js, line 21 passwordSecond Validates an address object. Source: user.js, line 30 phone Validates a Canadian SIN. Source: user.js, line 50 Methods email() Validates email addresses. Source: user.js, line 5 schemaValidate(schema, obj, validateOptions) Validates a schema on the server. This function is for use on the server only! Returns null if validation passed. Returns a yup ValidationError if it fails. Does not include the object as 'value'. Parameters: Name Type Description schema YupSchema The schema to validate against. obj object The object to validate. validateOptions Custom yup validate options. Source: schemaValidate.js, line 6 Returns: Type object Type Definitions YupSchema Generic Yup Schema Type: Object Source: index.js, line 20 × Search results Close Documentation generated by JSDoc 3.6.2 on 2019-08-28T09:32:26-05:00 using the DocStrap template. "},"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" Documentation Classes MomentSchemaMoneySchema Global addressemaillocalDateNumbermomentpasswordpasswordSecondphoneschemaValidate Classes Classes MomentSchema MoneySchema × Search results Close Documentation generated by JSDoc 3.6.2 on 2019-08-28T09:32:26-05:00 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" Documentation Classes MomentSchemaMoneySchema Global addressemaillocalDateNumbermomentpasswordpasswordSecondphoneschemaValidate sidebar_label: TSchemas title: TSchemas Useful yup schema shortcuts Install yarn add @thx/tschemas Usage import {shape} from 'yup'; import {localDate} from '@thx/tschemas'; const schema = shape({ myDate: localDate().required(), }); × Search results Close Documentation generated by JSDoc 3.6.2 on 2019-08-28T09:32:26-05:00 using the DocStrap template. "},"MomentSchema.html":{"id":"MomentSchema.html","title":"Class: MomentSchema","body":" Documentation Classes MomentSchemaMoneySchema Global addressemaillocalDateNumbermomentpasswordpasswordSecondphoneschemaValidate Class: MomentSchema MomentSchema Validates a Moment. new MomentSchema() Source: date.js, line 22 × Search results Close Documentation generated by JSDoc 3.6.2 on 2019-08-28T09:32:26-05:00 using the DocStrap template. "},"MoneySchema.html":{"id":"MoneySchema.html","title":"Class: MoneySchema","body":" Documentation Classes MomentSchemaMoneySchema Global addressemaillocalDateNumbermomentpasswordpasswordSecondphoneschemaValidate Class: MoneySchema MoneySchema Validates a Money (from js-money). new MoneySchema() Source: money.js, line 20 × Search results Close Documentation generated by JSDoc 3.6.2 on 2019-08-28T09:32:26-05:00 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
